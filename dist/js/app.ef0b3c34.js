(function(e){function t(t){for(var n,c,o=t[0],u=t[1],l=t[2],b=0,f=[];b<o.length;b++)c=o[b],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);s&&s(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},i=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/general-shortener-frontend/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},b233:function(e,t,r){"use strict";r("e70f")},bd58:function(e,t,r){"use strict";r("c189")},c189:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function a(e,t){var r=Object(n["N"])("router-view");return Object(n["D"])(),Object(n["i"])(r)}r("bd58");const i={};i.render=a;var c=i,o=r("6c02");r("d3b7"),r("ddb0");function u(e,t,r,a,i,c){var o=Object(n["N"])("navbar"),u=Object(n["N"])("el-header"),l=Object(n["N"])("entry-preview"),s=Object(n["N"])("entries-table"),b=Object(n["N"])("el-main"),f=Object(n["N"])("el-container");return Object(n["D"])(),Object(n["i"])(f,null,{default:Object(n["cb"])((function(){return[Object(n["m"])(u,null,{default:Object(n["cb"])((function(){return[Object(n["m"])(o)]})),_:1}),Object(n["m"])(b,null,{default:Object(n["cb"])((function(){return[Object(n["m"])(l,{trigger:e.dialogTrigger,href:e.href,mime:e.mime,type:e.type},null,8,["trigger","href","mime","type"]),Object(n["m"])(s,{entries:e.entries,onPreview:e.handlePreview,onDeletion:e.handleDeletion},null,8,["entries","onPreview","onDeletion"])]})),_:1})]})),_:1})}var l=r("3835"),s=r("1da1"),b=r("d4ec"),f=r("bee2"),p=r("262e"),j=r("2caf"),m=(r("96cf"),r("9ab4")),O=r("fbf8"),d=function(){function e(){Object(b["a"])(this,e)}return Object(f["a"])(e,null,[{key:"listEntries",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get(Object(O["a"])(r,"/list"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,i=a.data.message,e.abrupt("return",[i.data,void 0]);case 8:return e.prev=8,e.t0=e["catch"](0),e.abrupt("return",[void 0,e.t0]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"deleteEntry",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete(Object(O["a"])(r,a),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return i=e.sent,i.data.message,e.abrupt("return",void 0);case 8:return e.prev=8,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()}]),e}(),v=r("ce1f"),g=Object(n["m"])("i",{class:"el-icon-link"},null,-1),h={style:{"margin-left":"10px"}};function y(e,t,r,a,i,c){var o=this,u=Object(n["N"])("el-link"),l=Object(n["N"])("el-table-column"),s=Object(n["N"])("el-tag"),b=Object(n["N"])("el-button"),f=Object(n["N"])("el-popconfirm"),p=Object(n["N"])("el-button-group"),j=Object(n["N"])("el-table");return Object(n["D"])(),Object(n["i"])(j,{data:e.entries},{default:Object(n["cb"])((function(){return[Object(n["m"])(l,{prop:"slug",label:"Slug"},{default:Object(n["cb"])((function(t){return[Object(n["m"])(u,{target:"_blank",href:e.getUrl(t.row.slug)},{default:Object(n["cb"])((function(){return[g,Object(n["m"])("span",h,Object(n["R"])(e.getUrl(t.row.slug)),1)]})),_:2},1032,["href"])]})),_:1}),Object(n["m"])(l,{prop:"type",label:"Type",filters:[{text:"File",value:"file"},{text:"Text",value:"text"},{text:"URL",value:"url"}],"filter-method":e.filterType},{default:Object(n["cb"])((function(e){return[Object(n["m"])(s,{type:o.tagColors[e.row.type],"disable-transitions":""},{default:Object(n["cb"])((function(){return[Object(n["l"])(Object(n["R"])(e.row.type),1)]})),_:2},1032,["type"])]})),_:1},8,["filter-method"]),Object(n["m"])(l,{prop:"mime",label:"Mimetype",filters:[{text:"image/png",value:"image/png"},{text:"image/jpeg",value:"image/jpeg"},{text:"image/gif",value:"image/gif"},{text:"video/mp4",value:"video/mp4"},{text:"application/x-zip-compressed",value:"application/x-zip-compressed"},{text:"text/plain",value:"text/plain"}],"filter-method":e.filterMime},null,8,["filter-method"]),Object(n["m"])(l,{label:"Actions"},{default:Object(n["cb"])((function(t){return[Object(n["m"])(p,null,{default:Object(n["cb"])((function(){return[Object(n["m"])(b,{type:"primary",icon:"el-icon-folder-opened",size:"mini",onClick:function(r){return o.requestPreview(e.getUrl(t.row.slug),t.row.type,t.row.mime)}},null,8,["onClick"]),Object(n["m"])(f,{title:"Are you sure?",onConfirm:function(r){return e.requestDeletion(t.row.slug)}},{reference:Object(n["cb"])((function(){return[Object(n["m"])(b,{type:"danger",icon:"el-icon-delete",size:"mini"})]})),_:2},1032,["onConfirm"])]})),_:2},1024)]})),_:1})]})),_:1},8,["data"])}var w=function(e){Object(p["a"])(r,e);var t=Object(j["a"])(r);function r(){var e;return Object(b["a"])(this,r),e=t.apply(this,arguments),e.entries=[],e.tagColors={file:"primary",text:"success",url:"warning"},e}return Object(f["a"])(r,[{key:"getUrl",value:function(e){return Object(O["a"])(localStorage.getItem("server"),e)}},{key:"getDeletionUrl",value:function(e,t){return Object(O["a"])(localStorage.getItem("server"),e,t)}},{key:"filterType",value:function(e,t){return t.type===e}},{key:"filterMime",value:function(e,t){return t.mime===e}},{key:"requestPreview",value:function(e,t,r){var n={url:e,type:t,mime:r};this.$emit("preview",n)}},{key:"requestDeletion",value:function(e){var t={slug:e};this.$emit("deletion",t)}}]),r}(v["b"]);w=Object(m["a"])([Object(v["a"])({props:{entries:""}})],w);var k=w;k.render=y;var x=k,_={style:{float:"right","margin-top":"10px"}},S=Object(n["l"])("Logout");function N(e,t,r,a,i,c){var o=Object(n["N"])("el-button");return Object(n["D"])(),Object(n["i"])("div",_,[Object(n["m"])(o,{size:"small",type:"danger",onClick:e.logout},{default:Object(n["cb"])((function(){return[S]})),_:1},8,["onClick"])])}var D=function(e){Object(p["a"])(r,e);var t=Object(j["a"])(r);function r(){return Object(b["a"])(this,r),t.apply(this,arguments)}return Object(f["a"])(r,[{key:"logout",value:function(){localStorage.setItem("server",""),localStorage.setItem("token",""),this.$router.push("login")}}]),r}(v["b"]);D=Object(m["a"])([Object(v["a"])({})],D);var I=D;I.render=N;var R=I,P=(r("2ca0"),Object(n["gb"])("data-v-4248ea8d"));Object(n["H"])("data-v-4248ea8d");var U={class:"preview_window"},E={key:1,class:"preview_item",controls:"",autoplay:""},V={key:3},T=Object(n["l"])(" Open url "),C=Object(n["l"])("here");Object(n["E"])();var L=P((function(e,t,r,a,i,c){var o=Object(n["N"])("el-link"),u=Object(n["N"])("el-dialog");return Object(n["D"])(),Object(n["i"])(u,{title:"Preview",modelValue:e.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dialogVisible=t}),width:"80%",top:"5vh",center:""},{default:P((function(){var t,r,a,i;return[Object(n["m"])("div",U,[null!==(t=e.mime)&&void 0!==t&&t.startsWith("image")?(Object(n["D"])(),Object(n["i"])("img",{key:0,class:"preview_item",src:e.href},null,8,["src"])):Object(n["j"])("",!0),null!==(r=e.mime)&&void 0!==r&&r.startsWith("video")&&e.dialogVisible?(Object(n["D"])(),Object(n["i"])("video",E,[Object(n["m"])("source",{src:e.href,type:e.mime},null,8,["src","type"])])):Object(n["j"])("",!0),"text"==e.type||null!==(a=e.mime)&&void 0!==a&&a.startsWith("text")||null!==(i=e.mime)&&void 0!==i&&i.startsWith("application")?(Object(n["D"])(),Object(n["i"])("iframe",{key:2,frameborder:"0",class:"preview_item_text",src:e.href},null,8,["src"])):Object(n["j"])("",!0),"url"==e.type?(Object(n["D"])(),Object(n["i"])("p",V,[T,Object(n["m"])(o,{type:"primary",target:"_blank",href:e.href},{default:P((function(){return[C]})),_:1},8,["href"])])):Object(n["j"])("",!0)])]})),_:1},8,["modelValue"])})),$=function(e){Object(p["a"])(r,e);var t=Object(j["a"])(r);function r(){var e;return Object(b["a"])(this,r),e=t.apply(this,arguments),e.dialogVisible=!1,e.type="",e.href="",e.mime="",e}return Object(f["a"])(r,[{key:"created",value:function(){var e=this;this.$watch("trigger",(function(){e.dialogVisible=!0}))}}]),r}(v["b"]);$=Object(m["a"])([Object(v["a"])({props:{type:"",href:"",mime:"",trigger:0}})],$);var q=$;r("b233");q.render=L,q.__scopeId="data-v-4248ea8d";var z=q,M=r("3fd4"),W=function(e){Object(p["a"])(r,e);var t=Object(j["a"])(r);function r(){var e;return Object(b["a"])(this,r),e=t.apply(this,arguments),e.href="",e.type="",e.mime="",e.dialogTrigger=0,e}return Object(f["a"])(r,[{key:"mounted",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(localStorage.getItem("server")){e.next=4;break}this.$router.push("login"),e.next=6;break;case 4:return e.next=6,this.updateData();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handlePreview",value:function(e){console.log("I am here"),this.href=e.url,this.type=e.type,this.mime=e.mime,this.dialogTrigger++}},{key:"handleDeletion",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.deleteEntry(this.axios,localStorage.getItem("server")||"",localStorage.getItem("token")||"",t.slug);case 2:return e.sent,Object(M["a"])({title:"Success",message:"Successfully deleted entry",type:"success"}),e.next=6,this.updateData();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.listEntries(this.axios,localStorage.getItem("server")||"",localStorage.getItem("token")||"");case 2:t=e.sent,r=Object(l["a"])(t,2),n=r[0],a=r[1],a?(localStorage.setItem("server",""),localStorage.setItem("token",""),this.$router.push("login"),Object(M["a"])({title:"Error",message:"Error gathering list",type:"error"})):(this.entries=n,this.$forceUpdate());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(v["b"]);W=Object(m["a"])([Object(v["a"])({components:{EntriesTable:x,Navbar:R,EntryPreview:z}})],W);var A=W;A.render=u;var B=A;function F(e,t,r,a,i,c){var o=Object(n["N"])("login-form"),u=Object(n["N"])("el-container");return Object(n["D"])(),Object(n["i"])(u,{class:"center"},{default:Object(n["cb"])((function(){return[Object(n["m"])(o,{onSubmitLogin:e.loginSubmit},null,8,["onSubmitLogin"])]})),_:1})}var H=Object(n["m"])("p",{style:{"text-align":"center"}},"General shortener login",-1),J=Object(n["l"])("Login");function G(e,t,r,a,i,c){var o=this,u=Object(n["N"])("el-input"),l=Object(n["N"])("el-form-item"),s=Object(n["N"])("el-button"),b=Object(n["N"])("el-form"),f=Object(n["N"])("el-card");return Object(n["D"])(),Object(n["i"])(f,{shadow:"always"},{default:Object(n["cb"])((function(){return[H,Object(n["m"])(b,{ref:"form"},{default:Object(n["cb"])((function(){return[Object(n["m"])(l,{label:"Server",prop:"server"},{default:Object(n["cb"])((function(){return[Object(n["m"])(u,{"prefix-icon":"el-icon-takeaway-box",modelValue:o.server,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.server=e})},null,8,["modelValue"])]})),_:1}),Object(n["m"])(l,{label:"Token",prop:"token"},{default:Object(n["cb"])((function(){return[Object(n["m"])(u,{"prefix-icon":"el-icon-key",modelValue:o.token,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.token=e}),"show-password":""},null,8,["modelValue"])]})),_:1}),Object(n["m"])(l,{style:{float:"right"}},{default:Object(n["cb"])((function(){return[Object(n["m"])(s,{type:"primary",onClick:e.submit},{default:Object(n["cb"])((function(){return[J]})),_:1},8,["onClick"])]})),_:1})]})),_:1},512)]})),_:1})}r("3ca3"),r("2b3d");var K=function(e){Object(p["a"])(r,e);var t=Object(j["a"])(r);function r(){var e;return Object(b["a"])(this,r),e=t.apply(this,arguments),e.rules={server:[{required:!0,validator:e.checkIsUrl}],token:[{required:!0}]},e.server="",e.token="",e}return Object(f["a"])(r,[{key:"submit",value:function(){var e={server:this.server,token:this.token};this.$emit("submitLogin",e)}},{key:"checkIsUrl",value:function(e,t,r){if(t){var n;try{n=new URL(t)}catch(a){return void r(new Error("Url is invalid"))}"http:"===n.protocol||"https:"===n.protocol?r():r(new Error("Url is invalid"))}else r(new Error("server is required"))}}]),r}(v["b"]);K=Object(m["a"])([Object(v["a"])({})],K);var Q=K;Q.render=G;var X=Q,Y=function(e){Object(p["a"])(r,e);var t=Object(j["a"])(r);function r(){return Object(b["a"])(this,r),t.apply(this,arguments)}return Object(f["a"])(r,[{key:"loginSubmit",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.listEntries(this.axios,t.server,t.token);case 2:r=e.sent,n=Object(l["a"])(r,2),n[0],a=n[1],a?Object(M["a"])({title:"Error",message:"Wrong credentials",type:"error"}):(localStorage.setItem("server",t.server),localStorage.setItem("token",t.token),Object(M["a"])({title:"Success",message:"Successfully signed in!",type:"success"}),this.$router.push("/"));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(v["b"]);Y=Object(m["a"])([Object(v["a"])({components:{LoginForm:X}})],Y);var Z=Y;r("eca1");Z.render=F;var ee=Z,te=[{path:"/",name:"Home",component:B},{path:"/login",name:"Login",component:ee}],re=Object(o["a"])({history:Object(o["b"])("/general-shortener-frontend/"),routes:te}),ne=re,ae=r("2106"),ie=r.n(ae),ce=r("bc3a"),oe=r.n(ce),ue=(r("7dd6"),Object(n["h"])(c));ue.use(ne),ue.use(M["b"]),ue.use(ie.a,oe.a),ue.mount("#app")},d647:function(e,t,r){},e70f:function(e,t,r){},eca1:function(e,t,r){"use strict";r("d647")}});
//# sourceMappingURL=app.ef0b3c34.js.map